"""
Ð’Ð¾Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†Ñ‹ Ð² ÑÑ‚ÐµÐ¿ÐµÐ½ÑŒ ðŸŒ¶ï¸
ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñƒ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð²Ð¾Ð·Ð²Ð¾Ð´Ð¸Ñ‚ ÐºÐ²Ð°Ð´Ñ€Ð°Ñ‚Ð½ÑƒÑŽ Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†Ñƒ Ð² m-ÑƒÑŽ ÑÑ‚ÐµÐ¿ÐµÐ½ÑŒ.

Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…
ÐÐ° Ð²Ñ…Ð¾Ð´ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ðµ Ð¿Ð¾Ð´Ð°Ñ‘Ñ‚ÑÑ Ð½Ð°Ñ‚ÑƒÑ€Ð°Ð»ÑŒÐ½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾ n â€” ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÑ‚Ñ€Ð¾Ðº Ð¸ ÑÑ‚Ð¾Ð»Ð±Ñ†Ð¾Ð²
Ð² Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†Ðµ, Ð·Ð°Ñ‚ÐµÐ¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†Ñ‹, Ð·Ð°Ñ‚ÐµÐ¼ Ð½Ð°Ñ‚ÑƒÑ€Ð°Ð»ÑŒÐ½Ð¾Ðµ Ñ‡Ð¸ÑÐ»Ð¾ m.

Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…
ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð° Ð´Ð¾Ð»Ð¶Ð½Ð° Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð¸Ñ€ÑƒÑŽÑ‰ÑƒÑŽ Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†Ñƒ, Ñ€Ð°Ð·Ð´ÐµÐ»ÑÑ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð¼ Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð°.

Sample Input:
3
1 2 1
3 3 3
1 2 1
5

Sample Output:
1666 2222 1666
3333 4443 3333
1666 2222 1666
"""
n = int(input())
x = [list(map(int, input().split())) for _ in range(n)]
m = int(input())
c = [[0] * n for _ in range(n)]

for e in range(m - 1):
    d = [[0] * n for _ in range(n)]
    for i in range(n):
        for j in range(n):
            for p in range(n):
                if e == 0:
                    c[i][j] += x[i][p] * x[p][j]
                else:
                    d[i][j] += c[i][p] * x[p][j]
    if e > 0:
        c = d

for row in c:
    print(*row)
